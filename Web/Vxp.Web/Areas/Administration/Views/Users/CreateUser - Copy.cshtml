@using Vxp.Common
@using Vxp.Web.ViewModels.Administration.Users
@model AddUserInputModel

@{
    this.ViewData["Title"] = "Add User";
    this.ViewData["sidebarMenu"] = "Users";
}


<div class="d-lg-flex">
    <div class="mr-md-4 mr-lg-5">
        <span class="icon mb-3 d-block icon-user"></span>
    </div>
    <div class="d-flex flex-column w-100">
        <h3>Add User</h3>
        <hr class="h2" />
        <form method="post" asp-area="Administration" asp-controller="Users" asp-action="Create">
            <div class="d-flex ">
                <div asp-validation-summary="All" class="text-danger"></div>
                <div class="w-33">
                    <div class="form-group">
                        <select title="RoleName" class="form-control" asp-for="Role" asp-items="@Model.AvailableRoles" onchange="switchFormRoleMode(this.options[this.selectedIndex].text)"></select>
                        <span asp-validation-for="@Model.Role" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input asp-for="@Model.FirstName" class="form-control" placeholder="First name" value="@Model.FirstName" />
                        <span asp-validation-for="@Model.FirstName" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input asp-for="@Model.Email" class="form-control" placeholder="Email" value="@Model.Email" />
                        <span asp-validation-for="@Model.Email" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input asp-for="@Model.Password" class="form-control" placeholder="Password" value="@Model.Password" />
                        <span asp-validation-for="@Model.Password" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input asp-for="@Model.ConfirmPassword" class="form-control" placeholder="Confirm password" value="@Model.ConfirmPassword" />
                        <span asp-validation-for="@Model.ConfirmPassword" class="text-danger"></span>
                    </div>
                    <button type="submit" class="btn btn-primary py-3 px-5 text-nowrap">Register</button>
                </div>
                <div class="px-2"></div>
                <div class="w-33">
                    @*<div class="form-group">
                            <div class="form-control invisible"></div>
                        </div>*@
                    <div class="form-group">
                        <input asp-for="@Model.ContactPhone" class="form-control" placeholder="Phone" value="@Model.ContactPhone" />
                        <span asp-validation-for="@Model.ContactPhone" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input asp-for="@Model.LastName" class="form-control " placeholder="Last name" value="@Model.LastName" />
                        <span asp-validation-for="@Model.LastName" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input asp-for="@Model.Country" class="form-control new-user-country" placeholder="Country" value="@Model.Country" />
                        <span asp-validation-for="@Model.Country" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input asp-for="@Model.City" class="form-control" placeholder="City" value="@Model.City" />
                        <span asp-validation-for="@Model.City" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input asp-for="@Model.Address" class="form-control" placeholder="Address" value="@Model.Address" />
                        <span asp-validation-for="@Model.Address" class="text-danger"></span>
                    </div>
                    <div class="form-group customer-specific" style="display: none;">
                        <select title="Distributor" class="form-control" asp-for="DistributorId" asp-items="@Model.AvailableDistributors"></select>
                        <span asp-validation-for="@Model.DistributorId" class="text-danger"></span>
                    </div>
                    <div class="form-group distributor-specific" style="display: none;">
                        <input asp-for="@Model.ContactEmail" class="form-control" placeholder="Contact Email" value="@Model.ContactEmail" />
                        <span asp-validation-for="@Model.ContactEmail" class="text-danger"></span>
                    </div>
                </div>
                <div class="px-2"></div>
                <div class="w-33">
                    <div class="distributor-specific" style="display: none">
                        <div class="form-group">
                            <input asp-for="@Model.CompanyName" class="form-control" placeholder="Company Name" value="@Model.CompanyName" />
                            <span asp-validation-for="@Model.CompanyName" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <input asp-for="@Model.CompanyVatNumber" class="form-control" placeholder="Company Vat" value="@Model.CompanyVatNumber" />
                            <span asp-validation-for="@Model.CompanyVatNumber" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <input asp-for="@Model.AccountNumber" class="form-control" placeholder="Bank account" value="@Model.AccountNumber" />
                            <span asp-validation-for="@Model.AccountNumber" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <input asp-for="@Model.BankName" class="form-control" placeholder="Bank name" value="@Model.BankName" />
                            <span asp-validation-for="@Model.BankName" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <input asp-for="@Model.BicCode" class="form-control" placeholder="BIC code" value="@Model.BicCode" />
                            <span asp-validation-for="@Model.BicCode" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <input asp-for="@Model.SwiftCode" class="form-control" placeholder="SWIFT code" value="@Model.SwiftCode" />
                            <span asp-validation-for="@Model.SwiftCode" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts
{
    <script>

        function switchFormRoleMode(selectedRole) {

            switch (selectedRole) {

            case '@GlobalConstants.Roles.AdministratorRoleName':
                    $(".distributor-specific").hide();
                    $(".customer-specific").hide();
                break;

            case '@GlobalConstants.Roles.VendorRoleName':
                    $(".distributor-specific").show();
                    $(".customer-specific").hide();
                break;

            case '@GlobalConstants.Roles.DistributorRoleName':
                    $(".distributor-specific").show();
                    $(".customer-specific").hide();
                break;

            case '@GlobalConstants.Roles.CustomerRoleName':
                    $(".distributor-specific").hide();
                    $(".customer-specific").show();
                break;
            }
        }

        switchFormRoleMode("@Model.Role");

    $(function () {
        let availableCountries = @Html.Raw(Json.Serialize(Model.AvailableCountries));
            $(".new-user-country").autocomplete({
                source: availableCountries
            });
    });


    </script>
}
